// Code generated by protoc-gen-sphere. DO NOT EDIT.
// versions:
// - protoc             (unknown)
// source: api/v1/user.proto

package apiv1

import (
	context "context"
	protovalidate_go "github.com/bufbuild/protovalidate-go"
	gin "github.com/gin-gonic/gin"
	ginx "github.com/tbxark/sphere/pkg/server/ginx"
)

var _ = new(context.Context)
var _ = new(gin.Context)
var _ = new(ginx.ErrorResponse)
var _ = new(protovalidate_go.Validator)

const OperationUserServiceBindPhoneWxMini = "/api.v1.UserService/BindPhoneWxMini"
const OperationUserServiceMe = "/api.v1.UserService/Me"
const OperationUserServiceUpdate = "/api.v1.UserService/Update"

type UserServiceHTTPServer interface {
	BindPhoneWxMini(context.Context, *BindPhoneWxMiniRequest) (*BindPhoneWxMiniResponse, error)
	Me(context.Context, *MeRequest) (*MeResponse, error)
	Update(context.Context, *UpdateRequest) (*UpdateResponse, error)
}

// @Summary Me
// @Tags api.v1
// @Accept json
// @Produce json
// @Security ApiKeyAuth
// @Success 200 {object} ginx.DataResponse[MeResponse]
// @Success 400 {object} ginx.ErrorResponse
// @Success 401 {object} ginx.ErrorResponse
// @Success 403 {object} ginx.ErrorResponse
// @Success 500 {object} ginx.ErrorResponse
// @Router /api/user/me [get]
func _UserService_Me0_HTTP_Handler(srv UserServiceHTTPServer) func(ctx *gin.Context) {
	return ginx.WithJson(func(ctx *gin.Context) (*MeResponse, error) {
		var in MeRequest
		ctx.Set("operation", OperationUserServiceMe)
		out, err := srv.Me(ctx, &in)
		if err != nil {
			return nil, err
		}
		return out, nil
	})
}

// @Summary Update
// @Tags api.v1
// @Accept json
// @Produce json
// @Security ApiKeyAuth
// @Param request body UpdateRequest true "Request body"
// @Success 200 {object} ginx.DataResponse[UpdateResponse]
// @Success 400 {object} ginx.ErrorResponse
// @Success 401 {object} ginx.ErrorResponse
// @Success 403 {object} ginx.ErrorResponse
// @Success 500 {object} ginx.ErrorResponse
// @Router /api/user/update [post]
func _UserService_Update0_HTTP_Handler(srv UserServiceHTTPServer) func(ctx *gin.Context) {
	return ginx.WithJson(func(ctx *gin.Context) (*UpdateResponse, error) {
		var in UpdateRequest
		if err := ginx.ShouldBindJSON(ctx, &in); err != nil {
			return nil, err
		}
		ctx.Set("operation", OperationUserServiceUpdate)
		out, err := srv.Update(ctx, &in)
		if err != nil {
			return nil, err
		}
		return out, nil
	})
}

// @Summary BindPhoneWxMini
// @Tags api.v1
// @Accept json
// @Produce json
// @Security ApiKeyAuth
// @Param request body BindPhoneWxMiniRequest true "Request body"
// @Success 200 {object} ginx.DataResponse[BindPhoneWxMiniResponse]
// @Success 400 {object} ginx.ErrorResponse
// @Success 401 {object} ginx.ErrorResponse
// @Success 403 {object} ginx.ErrorResponse
// @Success 500 {object} ginx.ErrorResponse
// @Router /api/user/bind/phone/wxmini [post]
func _UserService_BindPhoneWxMini0_HTTP_Handler(srv UserServiceHTTPServer) func(ctx *gin.Context) {
	return ginx.WithJson(func(ctx *gin.Context) (*BindPhoneWxMiniResponse, error) {
		var in BindPhoneWxMiniRequest
		if err := ginx.ShouldBindJSON(ctx, &in); err != nil {
			return nil, err
		}
		ctx.Set("operation", OperationUserServiceBindPhoneWxMini)
		out, err := srv.BindPhoneWxMini(ctx, &in)
		if err != nil {
			return nil, err
		}
		return out, nil
	})
}

func RegisterUserServiceHTTPServer(route gin.IRouter, srv UserServiceHTTPServer, middlewares ...ginx.OperationMiddlewares) {
	r := route.Group("/")
	r.GET(
		"/api/user/me",
		ginx.MatchOperationMiddlewares(middlewares, OperationUserServiceMe),
		_UserService_Me0_HTTP_Handler(srv),
	)
	r.POST(
		"/api/user/update",
		ginx.MatchOperationMiddlewares(middlewares, OperationUserServiceUpdate),
		_UserService_Update0_HTTP_Handler(srv),
	)
	r.POST(
		"/api/user/bind/phone/wxmini",
		ginx.MatchOperationMiddlewares(middlewares, OperationUserServiceBindPhoneWxMini),
		_UserService_BindPhoneWxMini0_HTTP_Handler(srv),
	)
}
